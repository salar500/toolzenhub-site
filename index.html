<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>ToolZen Hub - Single File Demo</title>

  <!-- Tailwind CDN (Play CDN) for quick styling -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    // Optional Tailwind config
    tailwind.config = {
      darkMode: 'class',
      theme: {
        extend: {}
      }
    }
  </script>

  <!-- React / ReactDOM UMD -->
  <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>

  <!-- React Router DOM UMD -->
  <script crossorigin src="https://unpkg.com/react-router-dom@6/umd/react-router-dom.development.js"></script>

  <!-- Babel to allow JSX in browser (dev only - ok for demo) -->
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

  <style>
    /* small mobile tweaks for demo */
    body { -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale; }
    .no-underline { text-decoration: none; }
  </style>
</head>
<body class="antialiased">
  <div id="root"></div>

  <!-- App code (single-file). Uses React, ReactDOM, ReactRouterDOM from UMD -->
  <script type="text/babel">
    const { useState, useEffect, useMemo } = React;
    const { createRoot } = ReactDOM;
    const { BrowserRouter: Router, Routes, Route, Link, useNavigate, useParams } = ReactRouterDOM;

    // ---------------------- Data ----------------------
    const DATA = {
      categories: [
        { id: 'calculators', title: 'Calculators', icon: 'üßÆ', slug: 'calculators', description: 'Quick math & finance tools.' },
        { id: 'generators', title: 'Generators', icon: 'üìù', slug: 'generators', description: 'Create names, text, ideas.' }
      ],
      tools: [
        {
          id: 'bmi-calculator',
          title: 'BMI Calculator',
          slug: 'bmi-calculator',
          categoryId: 'calculators',
          shortDescription: 'Quick BMI check',
          type: 'auto-form',
          meta: {
            inputs: [
              { name: 'weight', label: 'Weight', type: 'number', unit: 'kg', placeholder: '60' },
              { name: 'height', label: 'Height', type: 'number', unit: 'cm', placeholder: '170' }
            ],
            compute: 'bmi'
          }
        },
        {
          id: 'age-calculator',
          title: 'Age Calculator',
          slug: 'age-calculator',
          categoryId: 'calculators',
          shortDescription: 'Find exact age',
          type: 'component',
          componentKey: 'Age'
        }
      ]
    };

    // ---------------------- App ----------------------
    function App() {
      return (
        <Router>
          <RootLayout>
            <Routes>
              <Route path="/" element={<Home />} />
              <Route path="/category/:slug" element={<CategoryPage />} />
              <Route path="/tool/:slug" element={<ToolPage />} />
              <Route path="*" element={<NotFound />} />
            </Routes>
          </RootLayout>
        </Router>
      );
    }

    // ---------------------- RootLayout ----------------------
    function RootLayout({ children }) {
      const [menuOpen, setMenuOpen] = useState(false);
      const [dark, setDark] = useState(() => {
        try { return localStorage.getItem('toolzen:dark') === '1' } catch { return false }
      });

      useEffect(() => {
        try { localStorage.setItem('toolzen:dark', dark ? '1' : '0') } catch {}
        document.documentElement.classList.toggle('dark', dark)
      }, [dark]);

      return (
        <div className="min-h-screen bg-gray-50 dark:bg-gray-900 text-gray-900 dark:text-gray-100 transition-colors">
          <Header onOpenMenu={() => setMenuOpen(true)} dark={dark} setDark={setDark} />
          <main className="max-w-5xl mx-auto px-4 py-6">
            {children}
          </main>
          <Footer />
          <SlideMenu open={menuOpen} onClose={() => setMenuOpen(false)} />
        </div>
      );
    }

    // ---------------------- Header ----------------------
    function Header({ onOpenMenu, dark, setDark }) {
      return (
        <header className="w-full border-b border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 sticky top-0 z-40">
          <div className="max-w-5xl mx-auto px-4 py-3 flex items-center justify-between">
            <div className="flex items-center space-x-3">
              <button onClick={onOpenMenu} aria-label="Open menu" className="p-2 rounded hover:bg-gray-100 dark:hover:bg-gray-700">‚ò∞</button>
              <Link to="/" className="flex items-center gap-3 no-underline">
                <div className="font-bold text-lg">ToolZen Hub</div>
              </Link>
            </div>

            <div className="flex items-center gap-3">
              <SearchBar />
              <button onClick={() => setDark(!dark)} className="px-3 py-1 rounded-md bg-gray-100 dark:bg-gray-700" aria-label="Toggle theme">
                {dark ? '‚òÄÔ∏è' : 'üåô'}
              </button>
              <div className="w-8 h-8 rounded-full bg-gray-300 dark:bg-gray-600" />
            </div>
          </div>
        </header>
      );
    }

    // ---------------------- SlideMenu ----------------------
    function SlideMenu({ open, onClose }) {
      const navigate = useNavigate();
      function go(path) { onClose(); navigate(path) }
      return (
        <div className={`fixed inset-0 z-50 transform transition-all ${open ? 'visible opacity-100' : 'invisible opacity-0'}`}>
          <div className="absolute inset-0 bg-black/40" onClick={onClose} />
          <aside className={`fixed right-0 top-0 h-full w-full max-w-xs bg-white dark:bg-gray-800 p-4 shadow-lg transform transition-transform ${open ? 'translate-x-0' : 'translate-x-full'}`}>
            <div className="flex items-center justify-between">
              <div className="font-bold">Menu</div>
              <button onClick={onClose} className="p-1">‚úï</button>
            </div>
            <nav className="mt-6 space-y-3">
              <button className="w-full text-left" onClick={() => go('/')}>Home</button>
              <button className="w-full text-left" onClick={() => go('/category/calculators')}>Categories</button>
              <button className="w-full text-left">Featured Tools</button>
              <button className="w-full text-left">Privacy Policy</button>
              <button className="w-full text-left">Terms of Use</button>
            </nav>
          </aside>
        </div>
      );
    }

    // ---------------------- SearchBar ----------------------
    function SearchBar() {
      const [q, setQ] = useState('');
      const navigate = useNavigate();
      const results = useMemo(() => {
        const s = q.trim().toLowerCase();
        if (!s) return [];
        const matches = [];
        for (const t of DATA.tools) {
          if ((t.title + ' ' + (t.shortDescription || '')).toLowerCase().includes(s)) matches.push(t)
        }
        return matches.slice(0, 6);
      }, [q]);

      return (
        <div className="relative w-64 sm:w-80">
          <input
            value={q}
            onChange={(e) => setQ(e.target.value)}
            placeholder="Search 200+ tools‚Ä¶"
            className="w-full rounded-full border px-4 py-2 focus:outline-none bg-white dark:bg-gray-800"
            onKeyDown={(e) => {
              if (e.key === 'Enter' && results[0]) { navigate(`/tool/${results[0].slug}`); setQ('') }
            }}
          />

          {q && results.length > 0 && (
            <div className="absolute left-0 right-0 mt-1 bg-white dark:bg-gray-800 rounded shadow border z-20">
              {results.map(r => (
                <div key={r.id} className="px-4 py-2 hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer" onClick={() => { navigate(`/tool/${r.slug}`); setQ('') }}>
                  <div className="font-medium">{r.title}</div>
                  <div className="text-sm text-gray-500">{r.shortDescription}</div>
                </div>
              ))}
            </div>
          )}
        </div>
      );
    }

    // ---------------------- Home Page ----------------------
    function Home() {
      const categories = DATA.categories;
      const featured = DATA.tools.slice(0, 6);

      return (
        <div className="space-y-8">
          <Hero />
          <section>
            <h2 className="text-xl font-semibold mb-4">Categories</h2>
            <div className="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4">
              {categories.map(c => <CategoryCard key={c.id} category={c} />)}
            </div>
          </section>

          <section>
            <h2 className="text-xl font-semibold mb-4">Featured Tools</h2>
            <div className="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4">
              {featured.map(t => <ToolCard key={t.id} tool={t} />)}
            </div>
          </section>
        </div>
      );
    }

    function Hero() {
      return (
        <div className="rounded-lg p-6 bg-gradient-to-r from-white to-gray-50 dark:from-gray-800 dark:to-gray-800 shadow">
          <div className="flex items-center justify-between">
            <div>
              <h1 className="text-2xl font-bold">All-in-One Tools Hub for Daily Productivity</h1>
              <p className="text-gray-600 dark:text-gray-300 mt-1">Calculators ‚Ä¢ Generators ‚Ä¢ Converters ‚Ä¢ More</p>
            </div>
            <div className="hidden md:block w-64 text-right text-sm text-gray-500">Fast access to 200+ tools</div>
          </div>
          <div className="mt-6 max-w-xl">
            <input placeholder="Search 200+ tools‚Ä¶" className="w-full rounded-full border px-4 py-3 focus:outline-none bg-white dark:bg-gray-800" />
          </div>
        </div>
      );
    }

    function CategoryCard({ category }) {
      return (
        <Link to={`/category/${category.slug}`} className="block p-4 rounded-lg border hover:shadow no-underline bg-white dark:bg-gray-800">
          <div className="text-3xl">{category.icon}</div>
          <div className="font-semibold mt-2 text-lg">{category.title}</div>
          <div className="text-sm text-gray-500 mt-1">{category.description}</div>
        </Link>
      );
    }

    function ToolCard({ tool }) {
      return (
        <div className="p-4 rounded-lg border hover:shadow flex flex-col justify-between bg-white dark:bg-gray-800">
          <div>
            <div className="font-semibold">{tool.title}</div>
            <div className="text-sm text-gray-500 mt-1">{tool.shortDescription}</div>
          </div>
          <div className="mt-4 flex gap-2">
            <Link to={`/tool/${tool.slug}`} className="px-3 py-1 rounded bg-blue-600 text-white">Open</Link>
            <button className="px-3 py-1 rounded border">Preview</button>
          </div>
        </div>
      );
    }

    // ---------------------- Category Page ----------------------
    function CategoryPage() {
      const { slug } = useParams();
      const navigate = useNavigate();
      const category = DATA.categories.find(c => c.slug === slug);
      const tools = DATA.tools.filter(t => t.categoryId === category?.id);

      if (!category) return <NotFound />;

      return (
        <div>
          <div className="mb-4">
            <button onClick={() => navigate(-1)} className="text-sm text-blue-600">‚Üê Back</button>
            <h2 className="text-2xl font-bold mt-2">{category.title}</h2>
            <div className="text-sm text-gray-500">{category.description}</div>
          </div>

          <div className="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4">
            {tools.map(t => <ToolCard key={t.id} tool={t} />)}
          </div>
        </div>
      );
    }

    // ---------------------- Tool Page ----------------------
    function ToolPage() {
      const { slug } = useParams();
      const navigate = useNavigate();
      const tool = DATA.tools.find(t => t.slug === slug);

      if (!tool) return <NotFound />;

      return (
        <div>
          <div className="mb-4 flex items-center justify-between">
            <div>
              <button onClick={() => navigate(-1)} className="text-sm text-blue-600">‚Üê Back</button>
              <h2 className="text-2xl font-bold mt-2">{tool.title}</h2>
              <div className="text-sm text-gray-500">{tool.shortDescription}</div>
            </div>
            <div className="text-sm text-gray-400">Share ‚§¥</div>
          </div>

          <div className="p-6 bg-white dark:bg-gray-800 rounded border">
            {tool.type === 'component' && <LazyTool componentKey={tool.componentKey} />}
            {tool.type === 'auto-form' && <AutoFormTool meta={tool.meta} />}
            {!['component', 'auto-form'].includes(tool.type) && <div>Tool type not supported yet.</div>}
          </div>
        </div>
      );
    }

    // ---------------------- LazyTool (placeholder) ----------------------
    function LazyTool({ componentKey }) {
      if (componentKey === 'Age') return <AgeCalculator />;
      return <div>Tool component "{componentKey}" not found.</div>;
    }

    // ---------------------- AutoFormTool (BMI) ----------------------
    function AutoFormTool({ meta }) {
      const initialState = {};
      for (const inp of meta.inputs) initialState[inp.name] = '';
      const [form, setForm] = useState(initialState);

      const values = form;
      const result = useMemo(() => {
        if (meta.compute === 'bmi') {
          const w = parseFloat(values.weight || 0);
          const h = (parseFloat(values.height || 0) || 0) / 100;
          if (!w || !h) return null;
          const bmi = w / (h * h);
          let cat = '‚Äî';
          if (bmi > 0) {
            if (bmi < 18.5) cat = 'Underweight';
            else if (bmi < 25) cat = 'Normal';
            else if (bmi < 30) cat = 'Overweight';
            else cat = 'Obese';
          }
          return { bmi, category: cat };
        }
        return null;
      }, [values, meta]);

      return (
        <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
          <div className="space-y-4">
            {meta.inputs.map(inp => (
              <label key={inp.name} className="block">
                <div className="text-sm font-medium">{inp.label} {inp.unit ? <span className="text-xs text-gray-500">({inp.unit})</span> : null}</div>
                <input
                  type={inp.type}
                  placeholder={inp.placeholder}
                  value={form[inp.name]}
                  onChange={(e) => setForm(prev => ({ ...prev, [inp.name]: e.target.value }))}
                  className="mt-1 w-full rounded border px-3 py-2 bg-white dark:bg-gray-800"
                />
              </label>
            ))}
            <div>
              <button onClick={() => {}} className="px-4 py-2 rounded bg-blue-600 text-white">Calculate</button>
            </div>
          </div>

          <div className="p-4 rounded border bg-gray-50 dark:bg-gray-900">
            <div className="text-sm text-gray-500">Your Result</div>
            <div className="text-3xl font-bold mt-2">{result ? result.bmi.toFixed(1) : '‚Äî'}</div>
            <div className="text-md mt-1">{result ? result.category : ''}</div>
          </div>
        </div>
      );
    }

    // ---------------------- Age Calculator ----------------------
    function AgeCalculator() {
      const [dob, setDob] = useState('');
      const [age, setAge] = useState(null);

      useEffect(() => {
        if (!dob) return setAge(null);
        const d = new Date(dob);
        if (isNaN(d)) return setAge(null);
        const diff = Date.now() - d.getTime();
        const y = new Date(diff).getUTCFullYear() - 1970;
        setAge(y);
      }, [dob]);

      return (
        <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
          <div>
            <label className="block">
              <div className="text-sm font-medium">Date of Birth</div>
              <input type="date" value={dob} onChange={e => setDob(e.target.value)} className="mt-1 w-full rounded border px-3 py-2 bg-white dark:bg-gray-800" />
            </label>
          </div>

          <div className="p-4 rounded border bg-gray-50 dark:bg-gray-900">
            <div className="text-sm text-gray-500">Your Age</div>
            <div className="text-3xl font-bold mt-2">{age !== null ? `${age} yrs` : '‚Äî'}</div>
          </div>
        </div>
      );
    }

    // ---------------------- Footer & NotFound ----------------------
    function Footer() {
      return (
        <footer className="mt-12 border-t border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800">
          <div className="max-w-5xl mx-auto px-4 py-6 text-sm text-gray-500 flex justify-between">
            <div>About | Privacy Policy | Terms</div>
            <div>¬© ToolZen Hub</div>
          </div>
        </footer>
      );
    }

    function NotFound() {
      return (
        <div className="text-center py-20">
          <h2 className="text-2xl font-bold">Page not found</h2>
          <p className="text-gray-500 mt-2">We couldn't find what you're looking for.</p>
          <div className="mt-6">
            <Link to="/" className="px-4 py-2 rounded bg-blue-600 text-white">Back to home</Link>
          </div>
        </div>
      );
    }

    // ---------------------- Mount ----------------------
    const root = createRoot(document.getElementById('root'));
    root.render(<App />);
  </script>
</body>
</html>
